<?php
    // HomeSample_Required.xml
	$url = 'http://stage.quotewizard.com/LEADAPI/Services/InboundVendorServices.asmx';
	$xmlPayload = '
			<!--Sample XML file generated by XMLSpy v2009 sp1 (http://www.altova.com)-->
			<QuoteWizardData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\Development\Clients\QuoteWizard\XSD\QW.xsd">
			  <QuoteRequest DateTime="2001-12-17T09:30:47Z">
			    <HomeInsurance>
			      <Contact MaritalStatus="Single" Gender="Male">
				<FirstName>Johnny</FirstName>
				<LastName>Appleseed</LastName>
				<Address1>1000 Main Street</Address1>
				<City>Fort Collins</City>
				<State>CO</State>
				<ZIPCode>80521</ZIPCode>
				<BirthDate>1967-02-24</BirthDate>
				<EmailAddress>email@email.com</EmailAddress>
				<PhoneNumbers>
				  <PrimaryPhone>
				    <PhoneNumberValue>970-498-5555</PhoneNumberValue>
				  </PrimaryPhone>
				  <SecondaryPhone>
				    <PhoneNumberValue>970-498-5555</PhoneNumberValue>
				  </SecondaryPhone>
				</PhoneNumbers>
				<Occupation>AdministrativeClerical</Occupation>
				<HighestLevelOfEducation>SomeOrNoHighSchool</HighestLevelOfEducation>
				<CreditRating SelfRating="Excellent"/>
				<CurrentResidence ResidenceStatus="Own">
				  <OccupancyDate>1987-08-13</OccupancyDate>
				</CurrentResidence>
			      </Contact>
			      <HomeInsuranceQuoteRequest>
				<ResidenceProfile DogBreed="None" UsedForBusinessOrFarming="Yes" DwellingType="Single_Family" OwnershipStatus="Own" SmokerInHousehold="Yes" OccupiedByApplicant="Yes" ResidenceType="Primary">
				  <ResidenceLocation>
				    <ResidenceAddress1>1000 Main Street</ResidenceAddress1>
				    <ResidenceCity>Fort Collins</ResidenceCity>
				    <ResidenceState>CO</ResidenceState>
				    <ResidenceZIPCode>80521</ResidenceZIPCode>
				  </ResidenceLocation>
				  <ConstructionProfile HeatingType="GasForcedAir" PropertyInFloodplain="Yes" ServicePanelType="CircuitBreaker" RoofType="CompositionShingle" RoofAge="OneTo5Years" FoundationType="No basement at all" GarageType="NoGarage" DesignType="OneStory" WiringType="Copper" ExteriorWallType="MostlyBrick">
				    <YearBuilt>1928</YearBuilt>
				    <ResidenceSquareFootage>900</ResidenceSquareFootage>
				    <NumberBedrooms>2</NumberBedrooms>
				    <NumberBathrooms>1 Bath</NumberBathrooms>
				  </ConstructionProfile>
				  <ResidenceAccessories/>
				  <ResidenceSecurityFeatures/>
				</ResidenceProfile>
				<InsuranceProfile>
				  <RequestedPolicy NewHome="Yes">
				    <StartDate>2009-08-13</StartDate>
				    <RequestedCoverages>
				      <RequestedCoverage>
					<CoverageAmount PersonalLiability="100000" Deductible="100">250000</CoverageAmount>
				      </RequestedCoverage>
				    </RequestedCoverages>
				  </RequestedPolicy>
				</InsuranceProfile>
			      </HomeInsuranceQuoteRequest>
			    </HomeInsurance>
			  </QuoteRequest>
			</QuoteWizardData>
		      ';
	
	$xmlRequest = '<?xml version="1.0" encoding="utf-8"?>
			  <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
					 xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
			  <soap:Body>
			    <SubmitVendorLead xmlns="http://www.quotewizard.com/">
			    <vendor>VendorName</vendor>
			    <contractID>45b5dd90-2161-40f0-aed9-41f14fe6c9b9</contractID>
			    <quoteData>'.$xmlPayload.'</quoteData>
			    <initialID>
			    </initialID>
			    <format>XML</format>
			    <pass>0</pass>
			    </SubmitVendorLead>
			  </soap:Body>
			  </soap:Envelope>
		      ';
	$curlParams = array('url' => $url,
			    'xml' => $xmlPayload
			   );

	$ch = curl_init($url);
	curl_setopt($ch, CURLOPT_URL, $url);
	curl_setopt($ch, CURLOPT_POST, true);
	curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
	curl_setopt($ch, CURLOPT_POSTFIELDS, $xmlRequest);
	curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-type: text/xml",
						   "Content-length: " . strlen($xmlPayload),
						   "Connection: close",
						   "SOAPAction: http://www.quotewizard.com/SubmitVendorLead"));

	curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false );

	$response = curl_exec($ch);
	var_dump( htmlentities($response) );
?>